(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[515],{97515:(t,e,a)=>{"use strict";a.r(e),a.d(e,{LayoutSetup:()=>p,default:()=>c});var o=a(72791),l=a(50649),s=a.n(l),i=a(17451),d=a(3429),u=a.n(d),n=a(55294),r=a(85797),h=a(80184);class p extends o.Component{constructor(t){super(t),this.onUploadVisible=t=>!t.row.isEditing,this.onUploadClick=t=>{this.state.jLayoutUpdate?this.setState({jLayout:{},jLayoutUpdate:!1},(()=>{1===t&&n.Z.get("/api/layout-list").then((t=>{this.setState({jLayoutList:JSON.parse(t.data[0].List)})})).catch((t=>{console.log(t)}))})):this.setState({jLayout:t.row.data},(()=>{this.LayoutRef.current.onModuleValueChanged({value:t.row.data.MainModule}),this.setState({jLayoutUpdate:!0})}))},this.OnToolbarPreparing=t=>{t.toolbarOptions.items.push({location:"after",widget:"dxButton",options:{icon:"add",onClick:t=>{this.setState({jLayoutUpdate:!this.state.jLayoutUpdate})}}})},this.state={jLayoutList:[],jlSchool:[],jlMainModule:[],jlSubModule:[],jLayout:{},jLayoutUpdate:!1,DocReadOnly:!1},this.Status=[{ID:1,Name:"Yes"},{ID:0,Name:"No"}],this.LayoutRef=o.createRef()}componentDidMount(){Promise.all([n.Z.get("/api/school-lookup"),n.Z.get("/api/module-main"),n.Z.get("/api/module-sub"),n.Z.get("/api/layout-list")]).then((t=>{let[e,a,o,l]=t;this.setState({jlSchool:e.data,jlMainModule:a.data,jlSubModule:o.data,jLayoutList:JSON.parse(l.data[0].List),DocReadOnly:false})})).catch((t=>console.log(t)))}onRowRemoved(t){n.Z.delete("/api/layout/".concat(t.data.AutoID)).then((t=>{console.log(t.data)})).catch((t=>{console.log(t)})),n.Z.get("/api/file-delete",{params:{Folder:"layout",FileName:t.data.FileName}}).then((t=>{console.log(t.data)})).catch((t=>{console.log(t)}))}render(){return(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)(i.Z,{title:"Layout Setup",children:(0,h.jsxs)(s(),{id:"grid-layout",keyExpr:"AutoID",showBorders:!0,dataSource:this.state.jLayoutList,onToolbarPreparing:this.OnToolbarPreparing,onRowRemoved:this.onRowRemoved,children:[(0,h.jsx)(l.GroupPanel,{visible:!0}),(0,h.jsx)(l.SearchPanel,{visible:!0}),(0,h.jsx)(l.Grouping,{autoExpandAll:!0}),(0,h.jsx)(l.Paging,{defaultPageSize:100}),(0,h.jsx)(l.Editing,{mode:"popup",allowDeleting:!this.state.DocReadOnly,useIcons:!0,children:(0,h.jsx)(l.Popup,{title:"Layout",showTitle:!0})}),(0,h.jsx)(l.Column,{dataField:"MainModule",groupIndex:1,children:(0,h.jsx)(l.Lookup,{dataSource:this.state.jlMainModule,displayExpr:"Name",valueExpr:"ModuleID"})}),(0,h.jsx)(l.Column,{dataField:"SubModule",children:(0,h.jsx)(l.Lookup,{dataSource:this.state.jlSubModule,displayExpr:"Name",valueExpr:"ModuleID"})}),(0,h.jsx)(l.Column,{dataField:"Name"}),(0,h.jsx)(l.Column,{dataField:"Status",children:(0,h.jsx)(l.Lookup,{dataSource:this.Status,displayExpr:"Name",valueExpr:"ID"})}),(0,h.jsx)(l.Column,{dataField:"Remark"}),(0,h.jsx)(l.Column,{type:"buttons",buttons:["edit",{hint:"Upload",icon:"upload",visible:this.onUploadVisible||this.state.DocReadOnly,onClick:this.onUploadClick},"delete"]})]})}),(0,h.jsx)(u(),{ref:this.LayoutRef,Show:this.state.jLayoutUpdate,OnHide:this.onUploadClick,FileInfo:this.state.jLayout,MainModule:this.state.jlMainModule,SubModule:this.state.jlSubModule,School:this.state.jlSchool})]})}}const c=(0,r.$j)((t=>({data:t.loggedReducer})))(p)},3429:()=>{}}]);
//# sourceMappingURL=515.5b4bead4.chunk.js.map