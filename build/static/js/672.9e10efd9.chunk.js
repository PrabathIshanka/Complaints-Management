"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[672],{17451:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(72791),i=s(63370),o=s(64074),l=s(73193),n=(s(28088),s(74387)),r=s(91923),d=s(80184);class h extends a.Component{constructor(){super(...arguments),this.state={isOption:this.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},this.cardReloadHandler=()=>{this.setState({loadCard:!0}),setInterval((()=>{this.setState({loadCard:!1})}),3e3)},this.cardRemoveHandler=()=>{this.setState({cardRemove:!0})}}render(){let e,t,s,a,h="",c=[];return this.state.isOption&&(s=(0,d.jsx)("div",{className:"card-header-right",children:(0,d.jsxs)(i.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,d.jsx)(i.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,d.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,d.jsxs)(i.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,d.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({fullCard:!e.fullCard})))},children:[(0,d.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,d.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,d.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({collapseCard:!e.collapseCard})))},children:[(0,d.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,d.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,d.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,d.jsx)("i",{className:"feather icon-refresh-cw"}),(0,d.jsx)("a",{href:r.Z.BLANK_LINK,children:" Reload "})]}),(0,d.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,d.jsx)("i",{className:"feather icon-trash"}),(0,d.jsx)("a",{href:r.Z.BLANK_LINK,children:" Remove "})]})]})]})})),a=(0,d.jsxs)(o.Z.Header,{children:[(0,d.jsx)(o.Z.Title,{as:"h5",children:this.props.title}),s]}),this.state.fullCard&&(c=[...c,"full-card"],e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(c=[...c,"card-load"],t=(0,d.jsx)("div",{className:"card-loader",children:(0,d.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(c=[...c,"d-none"]),this.props.cardClass&&(c=[...c,this.props.cardClass]),h=(0,d.jsxs)(o.Z,{className:c.join(" "),style:e,children:[a,(0,d.jsx)(l.Z,{in:!this.state.collapseCard,children:(0,d.jsx)("div",{children:(0,d.jsx)(o.Z.Body,{children:this.props.children})})}),t]}),(0,d.jsx)(n.Z,{children:h})}}const c=h},68672:(e,t,s)=>{s.r(t),s.d(t,{Employee:()=>S,default:()=>N});var a=s(72791),i=s(74387),o=s(17451),l=s(68962),n=s.n(l),r=s(89139),d=s(43360),h=s(45085),c=s(50649),m=s.n(c),p=s(80184);class u extends a.Component{constructor(e){super(e),this.onSelectionChanged=e=>{this.setState({SelectID:e.selectedRowsData[0].Id})},this.onSelectClick=e=>{this.props.OnHide(this.state.SelectID)},this.onCloseClick=e=>{this.props.OnHide(0)},this.state={SelectID:0,jList:[]}}componentDidMount(){console.log("User",this.props.UserList)}render(){return(0,p.jsx)(a.Fragment,{children:(0,p.jsxs)(h.Z,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1,children:[(0,p.jsx)(h.Z.Header,{closeButton:!0,children:(0,p.jsx)(h.Z.Title,{children:"List of User"})}),(0,p.jsxs)(h.Z.Body,{children:[(0,p.jsxs)(m(),{id:"grid-list",dataSource:this.props.UserList,keyExpr:"Id",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged,children:[(0,p.jsx)(c.SearchPanel,{visible:!0}),(0,p.jsx)(c.GroupPanel,{visible:!0}),(0,p.jsx)(c.Paging,{defaultPageSize:20}),(0,p.jsx)(c.Column,{dataField:"Id",visible:!1}),(0,p.jsx)(c.Column,{dataField:"UserName"}),(0,p.jsx)(c.Column,{dataField:"FullName"}),(0,p.jsx)(c.Column,{dataField:"Designation"}),(0,p.jsx)(c.Column,{dataField:"ContactNo"}),(0,p.jsx)(c.Column,{dataField:"Remark"})]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(d.Z,{variant:"secondary",onClick:this.onSelectClick,children:"Open"}),(0,p.jsx)(d.Z,{variant:"secondary",onClick:this.onCloseClick,icon:"feather icon-layers",children:"Close"})]})]})})}}const j=u;s(67810);var x=s(21830),g=s.n(x),I=s(55294),y=s(65410),C=s.n(y),R=(s(51793),s(47885)),E=s(85797);class S extends a.Component{constructor(e){super(e),this.componentDidMount=e=>{console.log("HIIIIIII",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),I.Z.all([I.Z.get("http://20.201.121.161:4478/api/Role",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})]).then(I.Z.spread((e=>{console.log("jRoles",e),this.setState({jRoles:e.data},(()=>console.log("jRoles",this.state.jRoles)))}))).catch((e=>console.log(e)))},this.onLoadPanelHiding=(e,t)=>{this.setState({LoadPanelVisible:!1}),this.OnNotification(e,t)},this.OnNotification=(e,t)=>{C()({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClickEvent=()=>{},this.OnSaveValidation=async()=>!0,this.SaveData=async e=>{await this.OnSaveValidation()&&g().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),console.log({firstName:this.state.jEmployee.firstName,lastName:this.state.jEmployee.lastName,email:this.state.jEmployee.email,nic:this.state.jEmployee.nic,address:this.state.jEmployee.address,mobileNo:this.state.jEmployee.mobileNo,dob:this.state.jEmployee.dob,gender:this.state.jEmployee.gender,status:this.state.jEmployee.status,type:0,roleId:this.state.jEmployee.roleId,branchId:2,designation:this.state.jEmployee.designation,changePassword:!1}),this.serverRequest=I.Z.post("http://20.201.121.161:4478/api/Employee",{firstName:this.state.jEmployee.firstName,lastName:this.state.jEmployee.lastName,email:this.state.jEmployee.email,nic:this.state.jEmployee.nic,address:this.state.jEmployee.address,mobileNo:JSON.stringify(this.state.jEmployee.mobileNo),dob:this.state.jEmployee.dob,gender:this.state.jEmployee.gender,status:this.state.jEmployee.status,type:0,roleId:this.state.jEmployee.roleId,branchId:2,designation:this.state.jEmployee.designation,changePassword:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then((e=>{this.onLoadPanelHiding(e.data.email,"success"),this.OnClearForm()})).catch((e=>{this.onLoadPanelHiding("Something went wrong","error"),console.log("Error",e)}))):"cancel"==e.dismiss||e.dismiss}))},this.OnClearForm=()=>{console.log("cleared");this.state.jAuthorization;this.setState({EmployeeID:0,jEmployee:{Status:"Active"},jRoles:[],jAuthorization:[],jEmployeeList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,IsCashier:!1,DocReadOnly:!1})},this.onValueChanged=e=>{this.state.SelectedSchool=[];e.value.forEach((e=>{this.state.SelectedSchool.push({Id:e})})),console.log(this.state.SelectedSchool)},this.OnListClickEvent=e=>{this.setState({ListViewing:!this.state.ListViewing},(()=>{this.state.ListViewing&&(this.serverRequest=I.Z.get("/api/user-lookup").then((e=>{console.log(e.data),this.setState({jUserList:e.data})})).catch((e=>{console.log(e)}))),this.state.ListViewing||0==e||this.setState({UserID:e},(()=>this.OnLoadData()))}))},this.onRowUpdating=e=>{9===e.newData.Auth&&(e.cancel=!0)},this.onRowUpdated=e=>{let t=this.state.jAuthorization;if(1===e.data.Type)t=t.map((t=>t.RootParent===e.data.MenuID||t.ParentID===e.data.MenuID?{...t,Auth:e.data.Auth}:t));else{let s=t.filter((t=>t.ParentID===e.data.ParentID)),a=t.filter((t=>t.ParentID===e.data.ParentID&&t.Auth===e.data.Auth));t=s.length===a.length?t.map((t=>t.MenuID===e.data.ParentID?{...t,Auth:e.data.Auth}:t)):t.map((t=>t.MenuID===e.data.ParentID?{...t,Auth:9}:t));let i=t.filter((t=>t.RootParent===e.data.RootParent)),o=t.filter((t=>t.RootParent===e.data.RootParent&&t.Auth===e.data.Auth));t=i.length===o.length?t.map((t=>t.MenuID===e.data.RootParent?{...t,Auth:e.data.Auth}:t)):t.map((t=>t.MenuID===e.data.RootParent?{...t,Auth:9}:t))}this.setState({jAuthorization:t})},this.state={EmployeeID:0,jEmployee:{Status:"Active"},jRoles:[],jAuthorization:[],jEmployeeList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,IsCashier:!1,DocReadOnly:!1},this.Status=[{ID:"Active",Name:"Active"},{ID:"Inactive",Name:"Inactive"}],this.Gender=[{ID:"Male",Name:"Male"},{ID:"Female",Name:"Female"}],this.onLoadPanelHiding=this.onLoadPanelHiding.bind(this),this.FormRef=a.createRef()}get FormLayout(){return this.FormRef.current.instance}OnLoadData(){I.Z.all([I.Z.get("/api/user",{params:{UserID:this.state.UserID}})]).then(I.Z.spread((e=>{console.log("User",e),this.setState({DataLoading:!0},(()=>this.setState({jlUserGroup:this.getUserGroup(JSON.parse(e.data[0].Users).GroupID),jUser:JSON.parse(e.data[0].Users),jAuthorization:JSON.parse(e.data[0].UserWiseAuthontication),PasswordChange:!1})))}))).catch((e=>console.log(e)))}render(){return(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(o.Z,{title:"Employee",children:(0,p.jsx)(n(),{ref:this.FormRef,formData:this.state.jEmployee,children:(0,p.jsxs)(l.GroupItem,{caption:"Employee Information",colCount:2,children:[(0,p.jsxs)(l.Item,{dataField:"firstName",editorOptions:{maxLength:50,readOnly:0!=this.state.EmployeeID},children:[(0,p.jsx)(l.RequiredRule,{message:"Field required"}),(0,p.jsx)(l.Label,{text:"First Name"})]}),(0,p.jsx)(l.Item,{dataField:"lastName",editorOptions:{maxLength:50},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsxs)(l.Item,{dataField:"email",editorOptions:{maxLength:50},children:[(0,p.jsx)(l.RequiredRule,{message:"Field required"}),(0,p.jsx)(l.EmailRule,{message:"Email is invalid"})]}),(0,p.jsx)(l.Item,{dataField:"nic",editorOptions:{maxLength:12,minLength:10},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsx)(l.Item,{dataField:"address",editorOptions:{maxLength:100},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsx)(l.Item,{dataField:"mobileNo",editorType:"dxNumberBox",editorOptions:{maxLength:12},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsxs)(l.Item,{dataField:"dob",editorType:"dxDateBox",children:[(0,p.jsx)(l.Label,{text:"Birthday"}),(0,p.jsx)(l.RequiredRule,{message:"Field required"})]}),(0,p.jsx)(l.Item,{dataField:"gender",editorType:"dxSelectBox",editorOptions:{items:this.Gender,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsxs)(l.Item,{dataField:"roleId",editorType:"dxSelectBox",editorOptions:{items:this.state.jRoles,searchEnabled:!0,displayExpr:"name",valueExpr:"id"},children:[(0,p.jsx)(l.Label,{text:"Job Role"}),(0,p.jsx)(l.RequiredRule,{message:"Field required"})]}),(0,p.jsxs)(l.Item,{dataField:"branchId",editorType:"dxSelectBox",editorOptions:{items:this.state.jRoles,searchEnabled:!0,displayExpr:"name",valueExpr:"id"},children:[(0,p.jsx)(l.Label,{text:"Instititution"}),(0,p.jsx)(l.RequiredRule,{message:"Field required"})]}),(0,p.jsx)(l.Item,{dataField:"designation",editorOptions:{maxLength:100},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})}),(0,p.jsx)(l.Item,{dataField:"status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,p.jsx)(l.RequiredRule,{message:"Field required"})})]})})}),(0,p.jsxs)(r.Z,{bg:"light",variant:"light",children:[(0,p.jsx)(d.Z,{variant:"secondary",onClick:this.SaveData,disabled:this.state.DocReadOnly,children:"Save"}),(0,p.jsx)(d.Z,{variant:"secondary",onClick:this.OnClearForm,children:"Clear"}),(0,p.jsx)(d.Z,{variant:"secondary",onClick:this.OnListClickEvent,children:"View List"})]}),(0,p.jsx)(R.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,p.jsx)(j,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,UserList:this.state.jEmployeeList})]})}}const N=(0,E.$j)((e=>(console.log(e.loggedReducer),{data:e.loggedReducer})))(S)}}]);
//# sourceMappingURL=672.9e10efd9.chunk.js.map