"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[14],{43014:(e,s,t)=>{t.r(s),t.d(s,{Users:()=>N,default:()=>O});var i=t(72791),a=t(74387),r=t(17451),o=t(68962),n=t.n(o),d=t(89139),l=t(43360),h=t(45085),c=t(50649),u=t.n(c),m=t(80184);class j extends i.Component{constructor(e){super(e),this.onSelectionChanged=e=>{this.setState({SelectID:e.selectedRowsData[0].Id})},this.onSelectClick=e=>{this.props.OnHide(this.state.SelectID)},this.onCloseClick=e=>{this.props.OnHide(0)},this.state={SelectID:0,jList:[]}}componentDidMount(){console.log("User",this.props.UserList)}render(){return(0,m.jsx)(i.Fragment,{children:(0,m.jsxs)(h.Z,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1,children:[(0,m.jsx)(h.Z.Header,{closeButton:!0,children:(0,m.jsx)(h.Z.Title,{children:"List of User"})}),(0,m.jsxs)(h.Z.Body,{children:[(0,m.jsxs)(u(),{id:"grid-list",dataSource:this.props.UserList,keyExpr:"Id",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged,children:[(0,m.jsx)(c.SearchPanel,{visible:!0}),(0,m.jsx)(c.GroupPanel,{visible:!0}),(0,m.jsx)(c.Paging,{defaultPageSize:20}),(0,m.jsx)(c.Column,{dataField:"Id",visible:!1}),(0,m.jsx)(c.Column,{dataField:"UserName"}),(0,m.jsx)(c.Column,{dataField:"FullName"}),(0,m.jsx)(c.Column,{dataField:"Designation"}),(0,m.jsx)(c.Column,{dataField:"ContactNo"}),(0,m.jsx)(c.Column,{dataField:"Remark"})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(l.Z,{variant:"secondary",onClick:this.onSelectClick,children:"Open"}),(0,m.jsx)(l.Z,{variant:"secondary",onClick:this.onCloseClick,icon:"feather icon-layers",children:"Close"})]})]})})}}const g=j;t(67810);var p=t(21830),x=t.n(p),U=t(55294),C=t(65410),S=t.n(C),w=(t(51793),t(47885)),L=t(85797);class N extends i.Component{constructor(e){super(e),this.componentDidMount=e=>{U.Z.all([]).then().catch((e=>console.log(e)))},this.onLoadPanelHiding=(e,s)=>{this.setState({LoadPanelVisible:!1}),this.OnNotification(e,s)},this.OnNotification=(e,s)=>{S()({message:e,type:s,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClickEvent=()=>{},this.OnSaveValidation=async()=>this.FormLayout.validate().isValid?(console.log(this.state.jUser.password),""==this.state.jUser.password||NaN==this.state.jUser.password||void 0==this.state.jUser.password?(this.OnNotification("Password is Required","error"),!1):0==/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(this.state.jUser.password)?(this.OnNotification("Passwords must contain at least 8 characters, including uppercase, lowercase letters and numbers.","error"),!1):this.state.jUser.password==this.state.jUser.ConfirmPassword||(this.OnNotification("New password & Confirm password must match","error"),!1)):(this.OnNotification("Fields marked with * are required","error"),!1),this.SaveData=async e=>{await this.OnSaveValidation()&&x().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),console.log({firstName:this.state.jUser.firstName,lastName:this.state.jUser.lastName,email:this.state.jUser.email,nic:this.state.jUser.nic,address:this.state.jUser.address,mobileNo:this.state.jUser.mobileNo,dob:this.state.jUser.dob,gender:this.state.jUser.gender,status:this.state.jUser.status,type:1,roleId:2}),this.serverRequest=U.Z.post("http://20.201.121.161:4478/api/User/Register",{firstName:this.state.jUser.firstName,lastName:this.state.jUser.lastName,email:this.state.jUser.email,nic:this.state.jUser.nic,address:this.state.jUser.address,mobileNo:JSON.stringify(this.state.jUser.mobileNo),dob:this.state.jUser.dob,gender:this.state.jUser.gender,status:this.state.jUser.status,type:1,roleId:2}).then((e=>{this.onLoadPanelHiding(e.data,"success"),this.OnClearForm()})).catch((e=>{this.onLoadPanelHiding("Something went wrong","error"),console.log(e)}))):"cancel"==e.dismiss||e.dismiss}))},this.OnClearForm=()=>{this.setState({UserID:0,jUser:{Status:1},jAuthorization:[],jUserList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,IsCashier:!1,DocReadOnly:!1})},this.onValueChanged=e=>{this.state.SelectedSchool=[];e.value.forEach((e=>{this.state.SelectedSchool.push({Id:e})})),console.log(this.state.SelectedSchool)},this.OnListClickEvent=e=>{this.setState({ListViewing:!this.state.ListViewing},(()=>{this.state.ListViewing&&(this.serverRequest=U.Z.get("/api/user-lookup").then((e=>{console.log(e.data),this.setState({jUserList:e.data})})).catch((e=>{console.log(e)}))),this.state.ListViewing||0==e||this.setState({UserID:e},(()=>this.OnLoadData()))}))},this.onModuleValueChanged=e=>{e.value&&!this.state.DataLoading&&U.Z.all([U.Z.get("/api/user-group",{params:{GroupID:e.value}})]).then(U.Z.spread((e=>{this.setState({jAuthorization:JSON.parse(e.data[0].UserWiseAuthontication)})}))).catch((e=>console.log(e)))},this.onChangePassword=e=>{e.value&&!this.state.DataLoading&&this.setState((s=>({jUser:{...s.jUser,Password:"",ConfirmPassword:""},PasswordChange:e.value})))},this.state={UserID:0,jUser:{Status:1},jAuthorization:[],jUserList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,DocReadOnly:!1},this.Auth=[{ID:0,Name:"Full Authorization"},{ID:1,Name:"Read-Only"},{ID:2,Name:"No Authorization"},{ID:9,Name:"Various Authorization"}],this.Status=[{ID:1,Name:"Active"},{ID:2,Name:"Inactive"}],this.Gender=[{ID:"Male",Name:"Male"},{ID:"Female",Name:"Female"}],this.onLoadPanelHiding=this.onLoadPanelHiding.bind(this),this.FormRef=i.createRef()}get FormLayout(){return this.FormRef.current.instance}OnLoadData(){U.Z.all([U.Z.get("/api/user",{params:{UserID:this.state.UserID}})]).then(U.Z.spread((e=>{this.setState({DataLoading:!0},(()=>this.setState({jUser:JSON.parse(e.data[0].Users),jAuthorization:JSON.parse(e.data[0].UserWiseAuthontication),jlCachGLAccount:JSON.parse(e.data[0].CashierAccount),PasswordChange:!1,IsCashier:JSON.parse(e.data[0].Users).Cashier},(()=>this.setState((s=>({jUser:{...s.jUser,Schools:JSON.parse(e.data[0].UserWiseSchool)}})),(()=>this.setState({DataLoading:!1})))))))}))).catch((e=>console.log(e)))}render(){return(0,m.jsxs)(a.Z,{children:[(0,m.jsx)(r.Z,{title:"User",children:(0,m.jsx)(n(),{ref:this.FormRef,formData:this.state.jUser,children:(0,m.jsxs)(o.GroupItem,{caption:"User Information",colCount:2,children:[(0,m.jsxs)(o.Item,{dataField:"firstName",editorOptions:{maxLength:50,readOnly:0!=this.state.UserID},children:[(0,m.jsx)(o.RequiredRule,{message:"Field required"}),(0,m.jsx)(o.Label,{text:"First Name"})]}),(0,m.jsx)(o.Item,{dataField:"lastName",editorOptions:{maxLength:50},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsxs)(o.Item,{dataField:"email",editorOptions:{maxLength:50},children:[(0,m.jsx)(o.RequiredRule,{message:"Field required"}),(0,m.jsx)(o.EmailRule,{message:"Email is invalid"})]}),(0,m.jsx)(o.Item,{dataField:"nic",editorOptions:{maxLength:12,minLength:10},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsx)(o.Item,{dataField:"address",editorOptions:{maxLength:100},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsx)(o.Item,{dataField:"mobileNo",editorType:"dxNumberBox",editorOptions:{maxLength:12},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsxs)(o.Item,{dataField:"dob",editorType:"dxDateBox",children:[(0,m.jsx)(o.Label,{text:"Birthday"}),(0,m.jsx)(o.RequiredRule,{message:"Field required"})]}),(0,m.jsx)(o.Item,{dataField:"gender",editorType:"dxSelectBox",editorOptions:{items:this.Gender,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsx)(o.Item,{dataField:"Status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,m.jsx)(o.RequiredRule,{message:"Field required"})}),(0,m.jsxs)(o.Item,{dataField:"password",displayFormat:"#",editorOptions:{mode:"password"},children:[(0,m.jsx)(o.RequiredRule,{message:"Field required"}),(0,m.jsx)(o.Label,{text:"New Password"})]}),(0,m.jsx)(o.Item,{dataField:"ConfirmPassword",editorOptions:{mode:"password"}})]})})}),(0,m.jsxs)(d.Z,{bg:"light",variant:"light",children:[(0,m.jsx)(l.Z,{variant:"secondary",onClick:this.SaveData,disabled:this.state.DocReadOnly,children:"Save"}),(0,m.jsx)(l.Z,{variant:"secondary",onClick:this.OnClearForm,children:"Clear"}),(0,m.jsx)(l.Z,{variant:"secondary",onClick:this.OnListClickEvent,children:"View List"})]}),(0,m.jsx)(w.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,m.jsx)(g,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,UserList:this.state.jUserList})]})}}const O=(0,L.$j)((e=>(console.log(e.loggedReducer),{data:e.loggedReducer})))(N)}}]);
//# sourceMappingURL=14.6bf004b0.chunk.js.map