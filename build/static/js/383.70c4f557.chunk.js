"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[383],{17451:(e,t,i)=>{i.d(t,{Z:()=>c});var s=i(72791),a=i(63370),n=i(64074),l=i(73193),o=(i(28088),i(74387)),r=i(91923),d=i(80184);class h extends s.Component{constructor(){super(...arguments),this.state={isOption:this.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},this.cardReloadHandler=()=>{this.setState({loadCard:!0}),setInterval((()=>{this.setState({loadCard:!1})}),3e3)},this.cardRemoveHandler=()=>{this.setState({cardRemove:!0})}}render(){let e,t,i,s,h="",c=[];return this.state.isOption&&(i=(0,d.jsx)("div",{className:"card-header-right",children:(0,d.jsxs)(a.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,d.jsx)(a.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,d.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,d.jsxs)(a.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,d.jsxs)(a.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({fullCard:!e.fullCard})))},children:[(0,d.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,d.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,d.jsxs)(a.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({collapseCard:!e.collapseCard})))},children:[(0,d.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,d.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,d.jsxs)(a.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,d.jsx)("i",{className:"feather icon-refresh-cw"}),(0,d.jsx)("a",{href:r.Z.BLANK_LINK,children:" Reload "})]}),(0,d.jsxs)(a.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,d.jsx)("i",{className:"feather icon-trash"}),(0,d.jsx)("a",{href:r.Z.BLANK_LINK,children:" Remove "})]})]})]})})),s=(0,d.jsxs)(n.Z.Header,{children:[(0,d.jsx)(n.Z.Title,{as:"h5",children:this.props.title}),i]}),this.state.fullCard&&(c=[...c,"full-card"],e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(c=[...c,"card-load"],t=(0,d.jsx)("div",{className:"card-loader",children:(0,d.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(c=[...c,"d-none"]),this.props.cardClass&&(c=[...c,this.props.cardClass]),h=(0,d.jsxs)(n.Z,{className:c.join(" "),style:e,children:[s,(0,d.jsx)(l.Z,{in:!this.state.collapseCard,children:(0,d.jsx)("div",{children:(0,d.jsx)(n.Z.Body,{children:this.props.children})})}),t]}),(0,d.jsx)(o.Z,{children:h})}}const c=h},54383:(e,t,i)=>{i.r(t),i.d(t,{AssignOfficer:()=>L,default:()=>b});var s=i(72791),a=i(74387),n=i(17451),l=i(68962),o=i.n(l),r=i(89139),d=i(43360),h=i(21197),c=(i(67810),i(21830)),p=i.n(c),m=i(55294),g=i(65410),x=i.n(g),u=(i(51793),i(47885)),j=i(85797),C=i(8047),I=i.n(C),v=(i(97596),i(80184));class L extends s.Component{constructor(e){super(e),this.componentDidMount=e=>{m.Z.all([m.Z.get("http://20.201.121.161:4478/api/Branch",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),m.Z.get("http://20.201.121.161:4478/api/CrimeType",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),m.Z.get("http://20.201.121.161:4478/api/Employee",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})]).then(m.Z.spread(((e,t,i)=>{this.setState({jBranch:e.data,jCrimeType:t.data,jEmployee:i.data},(()=>console.log("jRoles",this.state.jRoles)))}))).catch((e=>console.log(e)))},this.onLoadPanelHiding=(e,t)=>{this.setState({LoadPanelVisible:!1}),this.OnNotification(e,t)},this.OnNotification=(e,t)=>{x()({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClickEvent=()=>{},this.OnSaveValidation=async()=>!0,this.SaveData=async e=>{await this.OnSaveValidation()&&p().fire({type:"info",showCancelButton:!0,text:"Do you want to complain ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),m.Z.all([m.Z.put("http://20.201.121.161:4478/api/InquiryResponse/AssignOfficer",{id:this.state.ComplainID,employeeId:this.state.jComplain.employeeId},{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),m.Z.put("http://20.201.121.161:4478/api/InquiryResponse/Reply",{id:this.state.ComplainID,status:1,response:this.state.jComplain.reviewingResponse},{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}})]).then(m.Z.spread(((e,t)=>{this.onLoadPanelHiding("Assign Success","success"),this.OnClearForm()}))).catch((e=>{this.onLoadPanelHiding("Something went wrong","error"),console.log(e)}))):"cancel"==e.dismiss||e.dismiss}))},this.OnClearForm=()=>{console.log(this.state.jComplain.image),this.setState({File:null,FileName:null,base64Image:null,base64ImageInvestigate:null,ComplainID:0,jComplain:{},jAuthorization:[],jComplainList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,DocReadOnly:!1})},this.OnListClickEvent=e=>{this.setState({ListViewing:!this.state.ListViewing},(()=>{this.state.ListViewing&&(this.serverRequest=m.Z.get("http://20.201.121.161:4478/api/Inquiry",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{console.log(e.data),this.setState({jComplainList:e.data})})).catch((e=>{console.log(e)}))),this.state.ListViewing||0==e||(console.log("TEST SELECTED ID",e),this.setState({ComplainID:e},(()=>this.OnLoadData())))}))},this.onValueChanged=e=>{if(console.log(e),this.setState({File:e.value[0]}),this.state.File){const e=new FileReader;e.onloadend=()=>{this.setState({base64Image:e.result});const t=e.result;console.log(t)},e.readAsDataURL(this.state.File)}},this.state={File:null,FileName:null,base64Image:null,base64ImageInvestigate:null,ComplainID:0,jComplain:{Status:1},jCrimeType:[],jBranch:[],jEmployee:[],jAuthorization:[],jComplainList:[],SelectID:0,ListViewing:!1,DataLoading:!1,PasswordChange:!1,DocReadOnly:!1},this.Status=[{ID:0,Name:"Reviewing"},{ID:1,Name:"Assign To Officer"},{ID:2,Name:"Investigating"},{ID:3,Name:"Complete"},{ID:4,Name:"Closed"}],this.Institute=[{ID:0,Name:"Wildlife conservations"},{ID:1,Name:"Forest conservations"}],this.onLoadPanelHiding=this.onLoadPanelHiding.bind(this),this.FormRef=s.createRef()}get FormLayout(){return this.FormRef.current.instance}OnLoadData(){m.Z.all([m.Z.get("http://20.201.121.161:4478/api/Inquiry/"+this.state.ComplainID,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})]).then(m.Z.spread((e=>{console.log("HIIIII",e.data.userAttachment),this.setState({DataLoading:!0},(()=>this.setState({jComplain:e.data,base64Image:e.data.userAttachment,base64ImageInvestigate:e.data.investigatingAttachment},(()=>this.setState()))))}))).catch((e=>console.log(e)))}render(){return(0,v.jsxs)(a.Z,{children:[(0,v.jsx)(n.Z,{title:"Complain",children:(0,v.jsx)(o(),{ref:this.FormRef,formData:this.state.jComplain,children:(0,v.jsxs)(l.GroupItem,{caption:"Complain Information",colCount:2,children:[(0,v.jsxs)(l.Item,{dataField:"ticketId",editorOptions:{maxLength:4e3},disabled:!0,children:[(0,v.jsx)(l.RequiredRule,{message:"Field required"}),(0,v.jsx)(l.Label,{text:"Ticket"})]}),(0,v.jsx)(l.Item,{dataField:"crimeTypeId",editorType:"dxSelectBox",editorOptions:{items:this.state.jCrimeType,searchEnabled:!0,displayExpr:"name",valueExpr:"id"},children:(0,v.jsx)(l.RequiredRule,{message:"Field required"})}),(0,v.jsx)(l.Item,{dataField:"branchId",editorType:"dxSelectBox",editorOptions:{items:this.state.jBranch,searchEnabled:!0,displayExpr:"name",valueExpr:"id"},children:(0,v.jsx)(l.RequiredRule,{message:"Field required"})}),(0,v.jsx)(l.Item,{dataField:"institutionId",editorType:"dxSelectBox",editorOptions:{items:this.Institute,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,v.jsx)(l.RequiredRule,{message:"Field required"})}),(0,v.jsxs)(l.Item,{dataField:"inquiryEntry",editorOptions:{maxLength:4e3},children:[(0,v.jsx)(l.RequiredRule,{message:"Field required"}),(0,v.jsx)(l.Label,{text:"Inquiry"})]}),(0,v.jsx)(l.Item,{dataField:"status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},disabled:!0,children:(0,v.jsx)(l.RequiredRule,{message:"Field required"})}),(0,v.jsx)(l.Item,{dataField:"employeeId",editorType:"dxSelectBox",editorOptions:{items:this.state.jEmployee,searchEnabled:!0,displayExpr:"firstName",valueExpr:"userId"},children:(0,v.jsx)(l.RequiredRule,{message:"Field required"})}),(0,v.jsx)(l.Item,{dataField:"reviewingResponse",editorOptions:{maxLength:4e3},visible:0!=this.state.ComplainID,children:(0,v.jsx)(l.Label,{text:"Reviewing Response"})}),(0,v.jsx)(l.Item,{dataField:"assignResponse",editorOptions:{maxLength:4e3},visible:0!=this.state.ComplainID,children:(0,v.jsx)(l.Label,{text:"Assign Response"})}),(0,v.jsx)(l.Item,{dataField:"investigatingResponse",editorOptions:{maxLength:4e3},visible:0!=this.state.ComplainID,children:(0,v.jsx)(l.Label,{text:"Investigating Response"})}),(0,v.jsx)(l.Item,{dataField:"completeResponse",editorOptions:{maxLength:4e3},visible:0!=this.state.ComplainID,children:(0,v.jsx)(l.Label,{text:"Complete Response"})}),(0,v.jsx)(l.Item,{dataField:"userComment",editorOptions:{maxLength:4e3},visible:0!=this.state.ComplainID,children:(0,v.jsx)(l.Label,{text:"User Comment"})}),(0,v.jsx)(l.Item,{visible:0==this.state.ComplainID}),(0,v.jsxs)(l.Item,{disabled:0!=this.state.ComplainID,children:[(0,v.jsx)(I(),{selectButtonText:"Select File",labelText:"",accept:"application/x-rpt",allowedFileExtensions:[".jpg",".jpeg",".gif",".png"],uploadMode:"useForm",allowCanceling:!0,onValueChanged:this.onValueChanged}),(0,v.jsx)("img",{src:this.state.base64Image,alt:"",width:"200px",height:"200px"}),(0,v.jsx)(l.Label,{text:"User Attachment"})]}),(0,v.jsxs)(l.Item,{disabled:!0,visible:0!=this.state.ComplainID,children:[(0,v.jsx)(I(),{selectButtonText:"Select File",labelText:"",accept:"application/x-rpt",allowedFileExtensions:[".jpg",".jpeg",".gif",".png"],uploadMode:"useForm",allowCanceling:!0,onValueChanged:this.onValueChanged}),(0,v.jsx)("img",{src:this.state.base64ImageInvestigate,alt:"",width:"200px",height:"200px"}),(0,v.jsx)(l.Label,{text:"Investigating Attachment"})]})]})})}),(0,v.jsxs)(r.Z,{bg:"light",variant:"light",children:[(0,v.jsx)(d.Z,{variant:"secondary",onClick:this.SaveData,disabled:0==this.state.ComplainID||0!=this.state.jComplain.status,children:"Save"}),(0,v.jsx)(d.Z,{variant:"secondary",onClick:this.OnClearForm,children:"Clear"}),(0,v.jsx)(d.Z,{variant:"secondary",onClick:this.OnListClickEvent,children:"View List"})]}),(0,v.jsx)(u.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,v.jsx)(h.Z,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,ComplainInquiryList:this.state.jComplainList})]})}}const b=(0,j.$j)((e=>(console.log(e.loggedReducer),{data:e.loggedReducer})))(L)},21197:(e,t,i)=>{i.d(t,{Z:()=>h});var s=i(72791),a=i(45085),n=i(43360),l=i(50649),o=i.n(l),r=i(80184);class d extends s.Component{constructor(e){super(e),this.onSelectionChanged=e=>{this.setState({viewListSelectedID:e.selectedRowsData[0].id})},this.onSelectClick=e=>{this.props.OnHide(this.state.viewListSelectedID)},this.onCloseClick=e=>{this.props.OnHide(0)},this.state={viewListSelectedID:0,ComplainInquiryList:[]}}componentDidMount(){console.log()}render(){return(0,r.jsx)(s.Fragment,{children:(0,r.jsxs)(a.Z,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1,children:[(0,r.jsx)(a.Z.Header,{closeButton:!0,children:(0,r.jsx)(a.Z.Title,{children:"List of Complains/Inquiries"})}),(0,r.jsxs)(a.Z.Body,{children:[(0,r.jsxs)(o(),{id:"grid-list",dataSource:this.props.ComplainInquiryList,keyExpr:"id",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged,children:[(0,r.jsx)(l.SearchPanel,{visible:!0}),(0,r.jsx)(l.GroupPanel,{visible:!0}),(0,r.jsx)(l.Paging,{defaultPageSize:12}),(0,r.jsx)(l.Column,{dataField:"id",visible:!1}),(0,r.jsx)(l.Column,{dataField:"crimeTypeId"}),(0,r.jsx)(l.Column,{dataField:"inquiryEntry"}),(0,r.jsx)(l.Column,{dataField:"userComment"}),(0,r.jsx)(l.Column,{dataField:"rating"})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(n.Z,{variant:"dark",onClick:this.onSelectClick,children:"Open"}),(0,r.jsx)(n.Z,{variant:"dark",onClick:this.onCloseClick,icon:"feather icon-layers",children:"Close"})]})]})})}}const h=d}}]);
//# sourceMappingURL=383.70c4f557.chunk.js.map