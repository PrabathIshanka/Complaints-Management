"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[14],{17451:(e,s,t)=>{t.d(s,{Z:()=>c});var a=t(72791),i=t(63370),r=t(64074),o=t(73193),d=(t(28088),t(74387)),n=t(91923),l=t(80184);class h extends a.Component{constructor(){super(...arguments),this.state={isOption:this.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},this.cardReloadHandler=()=>{this.setState({loadCard:!0}),setInterval((()=>{this.setState({loadCard:!1})}),3e3)},this.cardRemoveHandler=()=>{this.setState({cardRemove:!0})}}render(){let e,s,t,a,h="",c=[];return this.state.isOption&&(t=(0,l.jsx)("div",{className:"card-header-right",children:(0,l.jsxs)(i.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,l.jsx)(i.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,l.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,l.jsxs)(i.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,l.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({fullCard:!e.fullCard})))},children:[(0,l.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,l.jsxs)("a",{href:n.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,l.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({collapseCard:!e.collapseCard})))},children:[(0,l.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,l.jsxs)("a",{href:n.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,l.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,l.jsx)("i",{className:"feather icon-refresh-cw"}),(0,l.jsx)("a",{href:n.Z.BLANK_LINK,children:" Reload "})]}),(0,l.jsxs)(i.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,l.jsx)("i",{className:"feather icon-trash"}),(0,l.jsx)("a",{href:n.Z.BLANK_LINK,children:" Remove "})]})]})]})})),a=(0,l.jsxs)(r.Z.Header,{children:[(0,l.jsx)(r.Z.Title,{as:"h5",children:this.props.title}),t]}),this.state.fullCard&&(c=[...c,"full-card"],e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(c=[...c,"card-load"],s=(0,l.jsx)("div",{className:"card-loader",children:(0,l.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(c=[...c,"d-none"]),this.props.cardClass&&(c=[...c,this.props.cardClass]),h=(0,l.jsxs)(r.Z,{className:c.join(" "),style:e,children:[a,(0,l.jsx)(o.Z,{in:!this.state.collapseCard,children:(0,l.jsx)("div",{children:(0,l.jsx)(r.Z.Body,{children:this.props.children})})}),s]}),(0,l.jsx)(d.Z,{children:h})}}const c=h},43014:(e,s,t)=>{t.r(s),t.d(s,{Users:()=>U,default:()=>f});var a=t(72791),i=t(74387),r=t(17451),o=t(68962),d=t.n(o),n=t(89139),l=t(43360),h=t(45085),c=t(50649),m=t.n(c),u=t(80184);class p extends a.Component{constructor(e){super(e),this.onSelectionChanged=e=>{this.setState({SelectID:e.selectedRowsData[0].Id})},this.onSelectClick=e=>{this.props.OnHide(this.state.SelectID)},this.onCloseClick=e=>{this.props.OnHide(0)},this.state={SelectID:0,jList:[]}}componentDidMount(){console.log("User",this.props.UserList)}render(){return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(h.Z,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1,children:[(0,u.jsx)(h.Z.Header,{closeButton:!0,children:(0,u.jsx)(h.Z.Title,{children:"List of User"})}),(0,u.jsxs)(h.Z.Body,{children:[(0,u.jsxs)(m(),{id:"grid-list",dataSource:this.props.UserList,keyExpr:"Id",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged,children:[(0,u.jsx)(c.SearchPanel,{visible:!0}),(0,u.jsx)(c.GroupPanel,{visible:!0}),(0,u.jsx)(c.Paging,{defaultPageSize:20}),(0,u.jsx)(c.Column,{dataField:"Id",visible:!1}),(0,u.jsx)(c.Column,{dataField:"UserName"}),(0,u.jsx)(c.Column,{dataField:"FullName"}),(0,u.jsx)(c.Column,{dataField:"Designation"}),(0,u.jsx)(c.Column,{dataField:"ContactNo"}),(0,u.jsx)(c.Column,{dataField:"Remark"})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(l.Z,{variant:"secondary",onClick:this.onSelectClick,children:"Open"}),(0,u.jsx)(l.Z,{variant:"secondary",onClick:this.onCloseClick,icon:"feather icon-layers",children:"Close"})]})]})})}}const j=p;t(67810);var x=t(21830),g=t.n(x),C=t(55294),N=t(65410),w=t.n(N),S=(t(51793),t(47885)),L=t(85797);class U extends a.Component{constructor(e){super(e),this.componentDidMount=e=>{C.Z.all([]).then().catch((e=>console.log(e)))},this.onLoadPanelHiding=(e,s)=>{this.setState({LoadPanelVisible:!1}),this.OnNotification(e,s)},this.OnNotification=(e,s)=>{w()({message:e,type:s,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClickEvent=()=>{},this.OnSaveValidation=async()=>this.FormLayout.validate().isValid?(console.log(this.state.jUser.password),""==this.state.jUser.password||NaN==this.state.jUser.password||void 0==this.state.jUser.password?(this.OnNotification("Password is Required","error"),!1):0==/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(this.state.jUser.password)?(this.OnNotification("Passwords must contain at least 8 characters, including uppercase, lowercase letters and numbers.","error"),!1):this.state.jUser.password==this.state.jUser.ConfirmPassword||(this.OnNotification("New password & Confirm password must match","error"),!1)):(this.OnNotification("Fields marked with * are required","error"),!1),this.SaveData=async e=>{await this.OnSaveValidation()&&g().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),console.log({firstName:this.state.jUser.firstName,lastName:this.state.jUser.lastName,email:this.state.jUser.email,nic:this.state.jUser.nic,address:this.state.jUser.address,mobileNo:this.state.jUser.mobileNo,dob:this.state.jUser.dob,gender:this.state.jUser.gender,status:this.state.jUser.status,type:1,roleId:2}),this.serverRequest=C.Z.post("http://20.201.121.161:4478/api/User/Register",{firstName:this.state.jUser.firstName,lastName:this.state.jUser.lastName,email:this.state.jUser.email,nic:this.state.jUser.nic,address:this.state.jUser.address,mobileNo:JSON.stringify(this.state.jUser.mobileNo),dob:this.state.jUser.dob,gender:this.state.jUser.gender,status:this.state.jUser.status,type:1,roleId:2}).then((e=>{this.onLoadPanelHiding(e.data,"success"),this.OnClearForm()})).catch((e=>{this.onLoadPanelHiding("Something went wrong","error"),console.log(e)}))):"cancel"==e.dismiss||e.dismiss}))},this.OnClearForm=()=>{this.setState({UserID:0,jUser:{Status:1},jAuthorization:[],jUserList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,IsCashier:!1,DocReadOnly:!1})},this.onValueChanged=e=>{this.state.SelectedSchool=[];e.value.forEach((e=>{this.state.SelectedSchool.push({Id:e})})),console.log(this.state.SelectedSchool)},this.OnListClickEvent=e=>{this.setState({ListViewing:!this.state.ListViewing},(()=>{this.state.ListViewing&&(this.serverRequest=C.Z.get("/api/user-lookup").then((e=>{console.log(e.data),this.setState({jUserList:e.data})})).catch((e=>{console.log(e)}))),this.state.ListViewing||0==e||this.setState({UserID:e},(()=>this.OnLoadData()))}))},this.onModuleValueChanged=e=>{e.value&&!this.state.DataLoading&&C.Z.all([C.Z.get("/api/user-group",{params:{GroupID:e.value}})]).then(C.Z.spread((e=>{this.setState({jAuthorization:JSON.parse(e.data[0].UserWiseAuthontication)})}))).catch((e=>console.log(e)))},this.onChangePassword=e=>{e.value&&!this.state.DataLoading&&this.setState((s=>({jUser:{...s.jUser,Password:"",ConfirmPassword:""},PasswordChange:e.value})))},this.state={UserID:0,jUser:{Status:1},jAuthorization:[],jUserList:[],ListViewing:!1,DataLoading:!1,PasswordChange:!1,DocReadOnly:!1},this.Auth=[{ID:0,Name:"Full Authorization"},{ID:1,Name:"Read-Only"},{ID:2,Name:"No Authorization"},{ID:9,Name:"Various Authorization"}],this.Status=[{ID:1,Name:"Active"},{ID:2,Name:"Inactive"}],this.Gender=[{ID:"Male",Name:"Male"},{ID:"Female",Name:"Female"}],this.onLoadPanelHiding=this.onLoadPanelHiding.bind(this),this.FormRef=a.createRef()}get FormLayout(){return this.FormRef.current.instance}OnLoadData(){C.Z.all([C.Z.get("/api/user",{params:{UserID:this.state.UserID}})]).then(C.Z.spread((e=>{this.setState({DataLoading:!0},(()=>this.setState({jUser:JSON.parse(e.data[0].Users),jAuthorization:JSON.parse(e.data[0].UserWiseAuthontication),jlCachGLAccount:JSON.parse(e.data[0].CashierAccount),PasswordChange:!1,IsCashier:JSON.parse(e.data[0].Users).Cashier},(()=>this.setState((s=>({jUser:{...s.jUser,Schools:JSON.parse(e.data[0].UserWiseSchool)}})),(()=>this.setState({DataLoading:!1})))))))}))).catch((e=>console.log(e)))}render(){return(0,u.jsxs)(i.Z,{children:[(0,u.jsx)(r.Z,{title:"User",children:(0,u.jsx)(d(),{ref:this.FormRef,formData:this.state.jUser,children:(0,u.jsxs)(o.GroupItem,{caption:"User Information",colCount:2,children:[(0,u.jsxs)(o.Item,{dataField:"firstName",editorOptions:{maxLength:50,readOnly:0!=this.state.UserID},children:[(0,u.jsx)(o.RequiredRule,{message:"Field required"}),(0,u.jsx)(o.Label,{text:"First Name"})]}),(0,u.jsx)(o.Item,{dataField:"lastName",editorOptions:{maxLength:50},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsxs)(o.Item,{dataField:"email",editorOptions:{maxLength:50},children:[(0,u.jsx)(o.RequiredRule,{message:"Field required"}),(0,u.jsx)(o.EmailRule,{message:"Email is invalid"})]}),(0,u.jsx)(o.Item,{dataField:"nic",editorOptions:{maxLength:12,minLength:10},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsx)(o.Item,{dataField:"address",editorOptions:{maxLength:100},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsx)(o.Item,{dataField:"mobileNo",editorType:"dxNumberBox",editorOptions:{maxLength:12},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsxs)(o.Item,{dataField:"dob",editorType:"dxDateBox",children:[(0,u.jsx)(o.Label,{text:"Birthday"}),(0,u.jsx)(o.RequiredRule,{message:"Field required"})]}),(0,u.jsx)(o.Item,{dataField:"gender",editorType:"dxSelectBox",editorOptions:{items:this.Gender,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsx)(o.Item,{dataField:"Status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"},children:(0,u.jsx)(o.RequiredRule,{message:"Field required"})}),(0,u.jsxs)(o.Item,{dataField:"password",displayFormat:"#",editorOptions:{mode:"password"},children:[(0,u.jsx)(o.RequiredRule,{message:"Field required"}),(0,u.jsx)(o.Label,{text:"New Password"})]}),(0,u.jsx)(o.Item,{dataField:"ConfirmPassword",editorOptions:{mode:"password"}})]})})}),(0,u.jsxs)(n.Z,{bg:"light",variant:"light",children:[(0,u.jsx)(l.Z,{variant:"secondary",onClick:this.SaveData,disabled:this.state.DocReadOnly,children:"Save"}),(0,u.jsx)(l.Z,{variant:"secondary",onClick:this.OnClearForm,children:"Clear"}),(0,u.jsx)(l.Z,{variant:"secondary",onClick:this.OnListClickEvent,children:"View List"})]}),(0,u.jsx)(S.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,u.jsx)(j,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,UserList:this.state.jUserList})]})}}const f=(0,L.$j)((e=>(console.log(e.loggedReducer),{data:e.loggedReducer})))(U)}}]);
//# sourceMappingURL=14.d7c31590.chunk.js.map