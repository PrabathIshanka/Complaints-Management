"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[219],{59219:(e,t,a)=>{a.r(t),a.d(t,{Notification:()=>C,default:()=>k});var s=a(72791),i=a(2677),o=a(64074),n=a(87462),l=a(63366),r=a(81694),d=a.n(r),c=a(10162),h=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"];const p=s.forwardRef((function(e,t){var a=e.bsPrefix,i=e.className,o=e.striped,r=e.bordered,p=e.borderless,u=e.hover,m=e.size,f=e.variant,g=e.responsive,v=(0,l.Z)(e,h),x=(0,c.vE)(a,"table"),b=d()(i,x,f&&x+"-"+f,m&&x+"-"+m,o&&x+"-striped",r&&x+"-bordered",p&&x+"-borderless",u&&x+"-hover"),D=s.createElement("table",(0,n.Z)({},v,{className:b,ref:t}));if(g){var N=x+"-responsive";return"string"===typeof g&&(N=N+"-"+g),s.createElement("div",{className:N},D)}return D}));var u=a(91923),m=a(55294),f=a(85797),g=a(27003),v=a(47885),x=a(65410),b=a.n(x),D=a(21830),N=a.n(D),j=a(72426),y=a.n(j),P=(a(29450),a(61229)),L=a(21188),w=a.n(L),I=a(80184);class C extends s.Component{constructor(e){super(e),this.OnLayoutClickEvent=()=>{0===this.state.ExamID?this.OnNotification("No data to print","warning"):this.setState({LayoutViewing:!this.state.LayoutViewing})},this.OnNotification=(e,t)=>{b()({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClearForm=()=>{this.setState({LoadPanelVisible:!1}),this.componentDidMount()},this.onLoadPanelHiding=()=>{this.setState({LoadPanelVisible:!1}),b()({message:"Successfully Saved",type:"success",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.ViewSetUp=(e,t,a,s,i)=>{},this.VisibleFalse=()=>{this.setState({LoadingExamSetUp:!1,LoadingID:0,LoadingViewPanel:!1})},this.hideInfo=()=>{this.setState({LoadingExamSetUp:!1})},this.updateMyData=e=>{if(null==this.state.jlBulkUpload||0==this.state.jlBulkUpload.length)return void this.state.jlBulkUpload.push({AutoID:e});let t=[...this.state.jlBulkUpload].find((t=>t.AutoID===e));if(void 0==t||null==t)this.state.jlBulkUpload.push({AutoID:e});else{var a=[...this.state.jlBulkUpload].findIndex((t=>t.AutoID===e));-1!==a&&this.state.jlBulkUpload.splice(a,1)}},this.onBulkApprove=()=>{0!=this.state.jlBulkUpload.length?N().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),this.state.jlBulkUpload.forEach((e=>{this.serverRequest=m.Z.post("/api/approvalTransactionApprove",{ApprovalTransactionID:e.AutoID}).then((e=>{})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))})),this.onLoadPanelHiding(),this.componentDidMount(),this.OnClearForm()):"cancel"==e.dismiss||e.dismiss})):b()({message:"Pleace select document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.onBulkReject=()=>{0!=this.state.jlBulkUpload.length?N().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),this.state.jlBulkUpload.forEach((e=>{this.serverRequest=m.Z.post("/api/ApprovalTransactionReject",{ApprovalTransactionID:e.AutoID}).then((e=>{})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))})),this.onLoadPanelHiding(),this.componentDidMount(),this.OnClearForm()):"cancel"==e.dismiss||e.dismiss})):b()({message:"Pleace select document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.state={jlNotification:[],LoadPanelVisible:!1,jlBulkUpload:[],LoadingID:0,LoadingExamSetUp:!1,LoadingExamSetUpID:0,LoadingDocumentID:0,LoadingViewPanel:!1,SchoolID:0,SubjectID:0,PartID:0,LoadingVisiblePlanale:!1,ViewDocumentTypeID:0},this.updateMyData=this.updateMyData.bind(this),this.VisibleFalse=this.VisibleFalse.bind(this)}componentDidMount(){this._isMounted=!0,console.log("reducer data",this.props.data.user.Id),m.Z.all([m.Z.get("/api/approvalTransaction",{params:{UserID:this.props.data.user.Id}})]).then(m.Z.spread((e=>{this._isMounted&&this.setState({jlNotification:JSON.parse(e.data[0].ApprovalTransaction)})}))).catch((e=>console.log(e)))}onClickApprove(e){void 0!=e||null!=e?N().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((t=>{t.value?(this.setState({LoadPanelVisible:!0}),this.serverRequest=m.Z.post("/api/approvalTransactionApprove",{ApprovalTransactionID:e}).then((e=>{console.log("res",e),5005==e.data[0].DocumentType?this.serverRequest=m.Z.post("/api/bulk-credit-note-approval-post-sap",{DocumentPostingData:e.data[0].DocumentPostingData,DocumentNumber:e.data[0].DocumentNumber}).then((e=>{400!=e.status?(this.onLoadPanelHiding(),this.OnClearForm()):(this.setState({LoadPanelVisible:!1}),b()({message:"Document Not Posting to SAP Please Check Document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}}),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)})):5004==e.data[0].DocumentType?this.serverRequest=m.Z.post("/api/bulk-invoice-approval-post-sap",{DocumentPostingData:e.data[0].DocumentPostingData,DocumentNumber:e.data[0].DocumentNumber}).then((e=>{400!=e.status?(this.onLoadPanelHiding(),this.OnClearForm()):(this.setState({LoadPanelVisible:!1}),b()({message:"Document Not Posting to SAP Please Check Document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}}),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)})):(this.onLoadPanelHiding(),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))):"cancel"==t.dismiss||t.dismiss})):b()({message:"Fields marked with * are required",type:"error",displayTime:3e3,position:{at:"top right",offset:"50"}})}onClickReject(e){void 0!=e||null!=e?N().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((t=>{t.value?(this.setState({LoadPanelVisible:!0}),this.serverRequest=m.Z.post("/api/ApprovalTransactionReject",{ApprovalTransactionID:e}).then((e=>{this.onLoadPanelHiding(),this.OnClearForm()})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))):"cancel"==t.dismiss||t.dismiss})):b()({message:"Fields marked with * are required",type:"error",displayTime:3e3,position:{at:"top right",offset:"50"}})}render(){return(0,I.jsxs)(i.Z,{md:12,xl:12,children:[(0,I.jsxs)(o.Z,{className:"Recent-Users",children:[(0,I.jsx)(o.Z.Header,{children:(0,I.jsx)(o.Z.Title,{as:"h5",children:"Approve Document's"})}),(0,I.jsx)(o.Z.Body,{className:"px-0 py-2",children:(0,I.jsx)(p,{responsive:!0,hover:!0,children:(0,I.jsx)("tbody",{children:this.renderTableData()})})})]}),(0,I.jsx)(v.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,I.jsx)(P.Popup,{visible:this.state.LoadingExamSetUp,onHiding:this.hideInfo,dragEnabled:!1,closeOnOutsideClick:!0,showTitle:!0,title:"Information",children:(0,I.jsx)(w(),{width:"100%",height:"100%"})})]})}renderTableData(){return this.state.jlNotification.map(((e,t)=>(0,I.jsxs)("tr",{className:"unread",children:[(0,I.jsx)("td",{children:(0,I.jsx)("input",{type:"checkbox",onClick:()=>this.updateMyData(e.AutoID)})}),(0,I.jsx)("td",{children:(0,I.jsx)("img",{className:"rounded-circle",style:{width:"40px"},src:g,alt:"activity-user"})}),(0,I.jsxs)("td",{children:[(0,I.jsx)("h6",{className:"mb-1",children:e.Name}),(0,I.jsx)("p",{className:"m-0",children:e.FullName})]}),(0,I.jsx)("td",{children:(0,I.jsxs)("h6",{className:"text-muted",children:[(0,I.jsx)("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),y()(e.CreateDate).format("YYYY-MM-DD")]})}),(0,I.jsx)("td",{children:(0,I.jsx)("div",{children:1==e.IsApproved?(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Approve"}):1==e.IsReject?(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Reject"}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Pending"})})}),(0,I.jsxs)("td",{children:[1==e.IsReject||1==e.IsApproved?(0,I.jsx)("div",{}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",onClick:()=>this.onClickReject(e.AutoID),children:"Reject"}),1==e.IsReject||1==e.IsApproved?(0,I.jsx)("div",{}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,onClick:()=>this.onClickApprove(e.AutoID),className:"label theme-bg text-white f-12",children:"Approve"}),(0,I.jsx)("a",{href:u.Z.BLANK_LINK,onClick:()=>this.ViewSetUp(e.DocumentNumber,e.DocumentTypeID,e.SchoolID,e.SunjectID,e.PartID),className:"label theme-bg text-white f-12",children:"View"})]})]},e.AutoID)))}}const k=(0,f.$j)((e=>({data:e.loggedReducer})))(C)},64074:(e,t,a)=>{a.d(t,{Z:()=>C});var s=a(87462),i=a(63366),o=a(81694),n=a.n(o),l=a(72791),r=a(10162),d=a(66543),c=a(27472),h=l.createContext(null);h.displayName="CardContext";const p=h;var u=["bsPrefix","className","variant","as"],m=l.forwardRef((function(e,t){var a=e.bsPrefix,o=e.className,d=e.variant,c=e.as,h=void 0===c?"img":c,p=(0,i.Z)(e,u),m=(0,r.vE)(a,"card-img");return l.createElement(h,(0,s.Z)({ref:t,className:n()(d?m+"-"+d:m,o)},p))}));m.displayName="CardImg",m.defaultProps={variant:null};const f=m;var g=["bsPrefix","className","bg","text","border","body","children","as"],v=(0,c.Z)("h5"),x=(0,c.Z)("h6"),b=(0,d.Z)("card-body"),D=(0,d.Z)("card-title",{Component:v}),N=(0,d.Z)("card-subtitle",{Component:x}),j=(0,d.Z)("card-link",{Component:"a"}),y=(0,d.Z)("card-text",{Component:"p"}),P=(0,d.Z)("card-header"),L=(0,d.Z)("card-footer"),w=(0,d.Z)("card-img-overlay"),I=l.forwardRef((function(e,t){var a=e.bsPrefix,o=e.className,d=e.bg,c=e.text,h=e.border,u=e.body,m=e.children,f=e.as,v=void 0===f?"div":f,x=(0,i.Z)(e,g),D=(0,r.vE)(a,"card"),N=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:D+"-header"}}),[D]);return l.createElement(p.Provider,{value:N},l.createElement(v,(0,s.Z)({ref:t},x,{className:n()(o,D,d&&"bg-"+d,c&&"text-"+c,h&&"border-"+h)}),u?l.createElement(b,null,m):m))}));I.displayName="Card",I.defaultProps={body:!1},I.Img=f,I.Title=D,I.Subtitle=N,I.Body=b,I.Link=j,I.Text=y,I.Header=P,I.Footer=L,I.ImgOverlay=w;const C=I},2677:(e,t,a)=>{a.d(t,{Z:()=>p});var s=a(87462),i=a(63366),o=a(81694),n=a.n(o),l=a(72791),r=a(10162),d=["bsPrefix","className","as"],c=["xl","lg","md","sm","xs"],h=l.forwardRef((function(e,t){var a=e.bsPrefix,o=e.className,h=e.as,p=void 0===h?"div":h,u=(0,i.Z)(e,d),m=(0,r.vE)(a,"col"),f=[],g=[];return c.forEach((function(e){var t,a,s,i=u[e];if(delete u[e],"object"===typeof i&&null!=i){var o=i.span;t=void 0===o||o,a=i.offset,s=i.order}else t=i;var n="xs"!==e?"-"+e:"";t&&f.push(!0===t?""+m+n:""+m+n+"-"+t),null!=s&&g.push("order"+n+"-"+s),null!=a&&g.push("offset"+n+"-"+a)})),f.length||f.push(m),l.createElement(p,(0,s.Z)({},u,{ref:t,className:n().apply(void 0,[o].concat(f,g))}))}));h.displayName="Col";const p=h},27472:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(87462),i=a(72791),o=a(81694),n=a.n(o);const l=function(e){return i.forwardRef((function(t,a){return i.createElement("div",(0,s.Z)({},t,{ref:a,className:n()(t.className,e)}))}))}}}]);
//# sourceMappingURL=219.2f7e4078.chunk.js.map