(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[515],{17451:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var s=a(72791),o=a(63370),l=a(64074),i=a(73193),d=(a(28088),a(74387)),r=a(91923),n=a(80184);class c extends s.Component{constructor(){super(...arguments),this.state={isOption:this.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},this.cardReloadHandler=()=>{this.setState({loadCard:!0}),setInterval((()=>{this.setState({loadCard:!1})}),3e3)},this.cardRemoveHandler=()=>{this.setState({cardRemove:!0})}}render(){let e,t,a,s,c="",h=[];return this.state.isOption&&(a=(0,n.jsx)("div",{className:"card-header-right",children:(0,n.jsxs)(o.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,n.jsx)(o.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,n.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,n.jsxs)(o.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({fullCard:!e.fullCard})))},children:[(0,n.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,n.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({collapseCard:!e.collapseCard})))},children:[(0,n.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,n.jsxs)("a",{href:r.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,n.jsx)("i",{className:"feather icon-refresh-cw"}),(0,n.jsx)("a",{href:r.Z.BLANK_LINK,children:" Reload "})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,n.jsx)("i",{className:"feather icon-trash"}),(0,n.jsx)("a",{href:r.Z.BLANK_LINK,children:" Remove "})]})]})]})})),s=(0,n.jsxs)(l.Z.Header,{children:[(0,n.jsx)(l.Z.Title,{as:"h5",children:this.props.title}),a]}),this.state.fullCard&&(h=[...h,"full-card"],e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(h=[...h,"card-load"],t=(0,n.jsx)("div",{className:"card-loader",children:(0,n.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(h=[...h,"d-none"]),this.props.cardClass&&(h=[...h,this.props.cardClass]),c=(0,n.jsxs)(l.Z,{className:h.join(" "),style:e,children:[s,(0,n.jsx)(i.Z,{in:!this.state.collapseCard,children:(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.Body,{children:this.props.children})})}),t]}),(0,n.jsx)(d.Z,{children:c})}}const h=c},97515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LayoutSetup:()=>u,default:()=>p});var s=a(72791),o=a(50649),l=a.n(o),i=a(17451),d=a(3429),r=a.n(d),n=a(55294),c=a(85797),h=a(80184);class u extends s.Component{constructor(e){super(e),this.onUploadVisible=e=>!e.row.isEditing,this.onUploadClick=e=>{this.state.jLayoutUpdate?this.setState({jLayout:{},jLayoutUpdate:!1},(()=>{1===e&&n.Z.get("/api/layout-list").then((e=>{this.setState({jLayoutList:JSON.parse(e.data[0].List)})})).catch((e=>{console.log(e)}))})):this.setState({jLayout:e.row.data},(()=>{this.LayoutRef.current.onModuleValueChanged({value:e.row.data.MainModule}),this.setState({jLayoutUpdate:!0})}))},this.OnToolbarPreparing=e=>{e.toolbarOptions.items.push({location:"after",widget:"dxButton",options:{icon:"add",onClick:e=>{this.setState({jLayoutUpdate:!this.state.jLayoutUpdate})}}})},this.state={jLayoutList:[],jlSchool:[],jlMainModule:[],jlSubModule:[],jLayout:{},jLayoutUpdate:!1,DocReadOnly:!1},this.Status=[{ID:1,Name:"Yes"},{ID:0,Name:"No"}],this.LayoutRef=s.createRef()}componentDidMount(){Promise.all([n.Z.get("/api/school-lookup"),n.Z.get("/api/module-main"),n.Z.get("/api/module-sub"),n.Z.get("/api/layout-list")]).then((e=>{let[t,a,s,o]=e;this.setState({jlSchool:t.data,jlMainModule:a.data,jlSubModule:s.data,jLayoutList:JSON.parse(o.data[0].List),DocReadOnly:false})})).catch((e=>console.log(e)))}onRowRemoved(e){n.Z.delete("/api/layout/".concat(e.data.AutoID)).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)})),n.Z.get("/api/file-delete",{params:{Folder:"layout",FileName:e.data.FileName}}).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))}render(){return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(i.Z,{title:"Layout Setup",children:(0,h.jsxs)(l(),{id:"grid-layout",keyExpr:"AutoID",showBorders:!0,dataSource:this.state.jLayoutList,onToolbarPreparing:this.OnToolbarPreparing,onRowRemoved:this.onRowRemoved,children:[(0,h.jsx)(o.GroupPanel,{visible:!0}),(0,h.jsx)(o.SearchPanel,{visible:!0}),(0,h.jsx)(o.Grouping,{autoExpandAll:!0}),(0,h.jsx)(o.Paging,{defaultPageSize:100}),(0,h.jsx)(o.Editing,{mode:"popup",allowDeleting:!this.state.DocReadOnly,useIcons:!0,children:(0,h.jsx)(o.Popup,{title:"Layout",showTitle:!0})}),(0,h.jsx)(o.Column,{dataField:"MainModule",groupIndex:1,children:(0,h.jsx)(o.Lookup,{dataSource:this.state.jlMainModule,displayExpr:"Name",valueExpr:"ModuleID"})}),(0,h.jsx)(o.Column,{dataField:"SubModule",children:(0,h.jsx)(o.Lookup,{dataSource:this.state.jlSubModule,displayExpr:"Name",valueExpr:"ModuleID"})}),(0,h.jsx)(o.Column,{dataField:"Name"}),(0,h.jsx)(o.Column,{dataField:"Status",children:(0,h.jsx)(o.Lookup,{dataSource:this.Status,displayExpr:"Name",valueExpr:"ID"})}),(0,h.jsx)(o.Column,{dataField:"Remark"}),(0,h.jsx)(o.Column,{type:"buttons",buttons:["edit",{hint:"Upload",icon:"upload",visible:this.onUploadVisible||this.state.DocReadOnly,onClick:this.onUploadClick},"delete"]})]})}),(0,h.jsx)(r(),{ref:this.LayoutRef,Show:this.state.jLayoutUpdate,OnHide:this.onUploadClick,FileInfo:this.state.jLayout,MainModule:this.state.jlMainModule,SubModule:this.state.jlSubModule,School:this.state.jlSchool})]})}}const p=(0,c.$j)((e=>({data:e.loggedReducer})))(u)},3429:()=>{}}]);
//# sourceMappingURL=515.f9ef17b9.chunk.js.map