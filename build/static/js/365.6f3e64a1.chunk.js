"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[365],{95365:(e,t,a)=>{a.r(t),a.d(t,{Role:()=>R,default:()=>m});var o=a(72791),i=a(74387),s=a(50649),n=a.n(s),d=a(17451),l=a(55294),r=a(80134),h=a(85797),c=a(65410),u=a.n(c),p=a(80184);class R extends o.Component{constructor(e){super(e),this.componentDidMount=e=>{l.Z.all([l.Z.get("http://20.201.121.161:4478/api/Role",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})]).then(l.Z.spread((e=>{this.setState({jCity:e.data})}))).catch((e=>console.log(e)))},this.onIDValidation=e=>new Promise(((t,a)=>{l.Z.get("/api/sub-master/defect-type-exist",{params:{AutoID:e.newData.AutoID?e.newData.AutoID:0,Code:e.newData.MSCode,Name:e.newData.MSName}}).then((e=>{t(1===e.data[0].Exist)})).catch((e=>{console.log(e)}))})),this.onRowValidating=async e=>{if(e.isValid){if(this.ValidationCheck)return e.isValid=!0,void(this.ValidationCheck=!1);if(e.isValid=!1,await this.onIDValidation(e))return e.isValid=!1,void this.OnNotification("Code or Name already exists","error");(0,r.confirm)("Want to save this record?","Confirmation").done((t=>{t?(this.ValidationCheck=!0,e.component.saveEditData()):e.component.cancelEditData()}))}},this.OnNotification=(e,t)=>{u()({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.state={jRole:[],DocReadOnly:!1},this.CanView=[{ID:!0,Name:"true"},{ID:!1,Name:"false"}],this.CanEdit=[{ID:!0,Name:"true"},{ID:!1,Name:"false"}],this.CanDelete=[{ID:!0,Name:"true"},{ID:!1,Name:"false"}],this.Institute=[{ID:0,Name:"Wildlife conservations"},{ID:1,Name:"Forest conservations"}],this.ValidationCheck=!1,this.onRowInserted=this.onRowInserted.bind(this),this.onRowUpdated=this.onRowUpdated.bind(this),this.onRowRemoved=this.onRowRemoved.bind(this)}onRowInserted(e){console.log(e.data),this.serverRequest=l.Z.post("http://20.201.121.161:4478/api/Role",e.data,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}onRowUpdated(e){this.serverRequest=l.Z.put("/api/sub-master/update-defect-types",e.data).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))}onRowRemoved(e){this.serverRequest=l.Z.delete("/api/sub-master/remove-defect-types/".concat(e.data.AutoID)).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))}onInitNewRow(e){e.data.Status=1}render(){return(0,p.jsx)(i.Z,{children:(0,p.jsx)(d.Z,{title:"Role",children:(0,p.jsxs)(n(),{id:"grid-defect-types",keyExpr:"id",dataSource:this.state.jCity,allowColumnReordering:!0,onRowInserted:this.onRowInserted,onRowUpdated:this.onRowUpdated,onRowRemoved:this.onRowRemoved,onInitNewRow:this.onInitNewRow,showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!0,children:[(0,p.jsx)(s.Editing,{mode:"popup",useIcons:!0,allowUpdating:!this.state.DocReadOnly,allowDeleting:!this.state.DocReadOnly,allowAdding:!this.state.DocReadOnly,children:(0,p.jsx)(s.Popup,{title:"Role",showTitle:!0})}),(0,p.jsx)(s.SearchPanel,{visible:!0,placeholder:"Search..."}),(0,p.jsx)(s.Column,{dataField:"id",editorOptions:{maxLength:50}}),(0,p.jsx)(s.Column,{dataField:"name",editorOptions:{maxLength:50},children:(0,p.jsx)(s.RequiredRule,{})}),(0,p.jsxs)(s.Column,{dataField:"institutionId",children:[(0,p.jsx)(s.Lookup,{dataSource:this.Institute,valueExpr:"ID",displayExpr:"Name"}),(0,p.jsx)(s.RequiredRule,{})]}),(0,p.jsxs)(s.Column,{dataField:"canView",children:[(0,p.jsx)(s.Lookup,{dataSource:this.CanView,valueExpr:"ID",displayExpr:"Name"}),(0,p.jsx)(s.RequiredRule,{})]}),(0,p.jsxs)(s.Column,{dataField:"canEdit",children:[(0,p.jsx)(s.Lookup,{dataSource:this.CanEdit,valueExpr:"ID",displayExpr:"Name"}),(0,p.jsx)(s.RequiredRule,{})]}),(0,p.jsxs)(s.Column,{dataField:"canDelete",children:[(0,p.jsx)(s.Lookup,{dataSource:this.CanDelete,valueExpr:"ID",displayExpr:"Name"}),(0,p.jsx)(s.RequiredRule,{})]})]})})})}}const m=(0,h.$j)((e=>(console.log(e.loggedReducer),{data:e.loggedReducer})))(R)}}]);
//# sourceMappingURL=365.6f3e64a1.chunk.js.map