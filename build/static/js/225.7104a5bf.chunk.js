(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[225],{17451:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(72791),o=a(63370),i=a(64074),r=a(73193),l=(a(28088),a(74387)),d=a(91923),n=a(80184);class h extends s.Component{constructor(){super(...arguments),this.state={isOption:this.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},this.cardReloadHandler=()=>{this.setState({loadCard:!0}),setInterval((()=>{this.setState({loadCard:!1})}),3e3)},this.cardRemoveHandler=()=>{this.setState({cardRemove:!0})}}render(){let e,t,a,s,h="",c=[];return this.state.isOption&&(a=(0,n.jsx)("div",{className:"card-header-right",children:(0,n.jsxs)(o.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,n.jsx)(o.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,n.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,n.jsxs)(o.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({fullCard:!e.fullCard})))},children:[(0,n.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,n.jsxs)("a",{href:d.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:()=>{this.setState((e=>({collapseCard:!e.collapseCard})))},children:[(0,n.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,n.jsxs)("a",{href:d.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,n.jsx)("i",{className:"feather icon-refresh-cw"}),(0,n.jsx)("a",{href:d.Z.BLANK_LINK,children:" Reload "})]}),(0,n.jsxs)(o.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,n.jsx)("i",{className:"feather icon-trash"}),(0,n.jsx)("a",{href:d.Z.BLANK_LINK,children:" Remove "})]})]})]})})),s=(0,n.jsxs)(i.Z.Header,{children:[(0,n.jsx)(i.Z.Title,{as:"h5",children:this.props.title}),a]}),this.state.fullCard&&(c=[...c,"full-card"],e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(c=[...c,"card-load"],t=(0,n.jsx)("div",{className:"card-loader",children:(0,n.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(c=[...c,"d-none"]),this.props.cardClass&&(c=[...c,this.props.cardClass]),h=(0,n.jsxs)(i.Z,{className:c.join(" "),style:e,children:[s,(0,n.jsx)(r.Z,{in:!this.state.collapseCard,children:(0,n.jsx)("div",{children:(0,n.jsx)(i.Z.Body,{children:this.props.children})})}),t]}),(0,n.jsx)(l.Z,{children:h})}}const c=h},72225:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ReportSetup:()=>p,default:()=>u});var s=a(72791),o=a(50649),i=a.n(o),r=a(17451),l=a(24935),d=a.n(l),n=a(55294),h=a(85797),c=a(80184);class p extends s.Component{constructor(e){super(e),this.onUploadVisible=e=>!e.row.isEditing,this.onUploadClick=e=>{this.state.jLayoutUpdate?this.setState({jLayout:{},jLayoutUpdate:!1},(()=>{1===e&&n.Z.get("/api/report-layout-list",{params:{UserID:this.props.data.user.Id}}).then((e=>{this.setState({jLayoutList:JSON.parse(e.data[0].List)})})).catch((e=>{console.log(e)}))})):this.setState({jLayout:e.row.data},(()=>{let t=[...this.state.jParameterList];t=t.filter((t=>t.ReportID==e.row.data.AutoID)).map((e=>e)),this.setState({jParameter:t},(()=>{this.setState({jLayoutUpdate:!0})}))}))},this.OnToolbarPreparing=e=>{e.toolbarOptions.items.push({location:"after",widget:"dxButton",options:{icon:"add",onClick:e=>{this.setState({jLayoutUpdate:!this.state.jLayoutUpdate})}}})},this.onGradeMoveClick=(e,t)=>{let a=this.state.jlParameter.filter((t=>t.IndexNo!==e.row.rowIndex+1)),s=this.state.jlParameter.filter((t=>t.IndexNo===e.row.rowIndex+1));a.splice("Up"===t?0===e.row.rowIndex?0:e.row.rowIndex-1:e.row.rowIndex+1,0,s[0]),a.map(((e,t,s)=>{a[t].IndexNo=t+1})),this.setState({jlParameter:a})},this.state={jLayoutList:[],jlSchool:[],jlMainModule:[],jlSubModule:[],jlCategory:[],jlParameter:[],jLayout:{},jParameter:[],jParameterList:[],jLayoutUpdate:!1,DocReadOnly:!1},this.Status=[{ID:1,Name:"Yes"},{ID:0,Name:"No"}],this.LayoutRef=s.createRef()}componentDidMount(){Promise.all([n.Z.get("/api/school-lookup-byLoginUser",{params:{UserID:this.props.data.user.Id}}),n.Z.get("/api/module-main"),n.Z.get("/api/module-sub"),n.Z.get("/api/report-layout-list",{params:{UserID:this.props.data.user.Id}}),n.Z.get("/api/report-category-list"),n.Z.get("/api/report-parameter-lookup")]).then((e=>{let[t,a,s,o,i,r]=e;this.setState({jlSchool:t.data,jlMainModule:a.data,jlCategory:i.data,jLayoutList:JSON.parse(o.data[0].List),jlParameter:r.data,jParameterList:JSON.parse(o.data[0].ListParameter),DocReadOnly:false})})).catch((e=>console.log(e)))}onRowRemoved(e){n.Z.delete("/api/report/".concat(e.data.AutoID)).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)})),n.Z.get("/api/file-delete",{params:{Folder:"layout",FileName:e.data.FileName}}).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)}))}render(){return(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(r.Z,{title:"Report Layout Setup",children:(0,c.jsxs)(i(),{id:"grid-layout",keyExpr:"AutoID",showBorders:!0,dataSource:this.state.jLayoutList,onToolbarPreparing:this.OnToolbarPreparing,onRowRemoved:this.onRowRemoved,children:[(0,c.jsx)(o.GroupPanel,{visible:!0}),(0,c.jsx)(o.SearchPanel,{visible:!0}),(0,c.jsx)(o.Grouping,{autoExpandAll:!0}),(0,c.jsx)(o.Paging,{defaultPageSize:100}),(0,c.jsx)(o.Editing,{mode:"popup",allowDeleting:!this.state.DocReadOnly,useIcons:!0,children:(0,c.jsx)(o.Popup,{title:"Layout",showTitle:!0})}),(0,c.jsx)(o.Column,{dataField:"CategoryID",caption:"Category",children:(0,c.jsx)(o.Lookup,{dataSource:this.state.jlCategory,displayExpr:"Name",valueExpr:"AutoID"})}),(0,c.jsx)(o.Column,{dataField:"Name"}),(0,c.jsx)(o.Column,{dataField:"Status",children:(0,c.jsx)(o.Lookup,{dataSource:this.Status,displayExpr:"Name",valueExpr:"ID"})}),(0,c.jsx)(o.Column,{type:"buttons",buttons:["edit",{hint:"Upload",icon:"upload",visible:this.onUploadVisible,onClick:this.onUploadClick},"delete"]})]})}),(0,c.jsx)(d(),{ref:this.LayoutRef,Show:this.state.jLayoutUpdate,OnHide:this.onUploadClick,FileInfo:this.state.jLayout,ParameterList:this.state.jParameter,MainModule:this.state.jlMainModule,SubModule:this.state.jlSubModule,School:this.state.jlSchool,Category:this.state.jlCategory,Parameter:this.state.jlParameter,onGradeMoveClick:this.onGradeMoveClick})]})}}const u=(0,h.$j)((e=>({data:e.loggedReducer})))(p)},24935:()=>{}}]);
//# sourceMappingURL=225.7104a5bf.chunk.js.map