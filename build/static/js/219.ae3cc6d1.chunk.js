"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[219],{59219:(e,t,s)=>{s.r(t),s.d(t,{Notification:()=>k,default:()=>A});var a=s(72791),i=s(2677),o=s(64074),n=s(87462),l=s(63366),r=s(81694),d=s.n(r),c=s(10162),h=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"];const p=a.forwardRef((function(e,t){var s=e.bsPrefix,i=e.className,o=e.striped,r=e.bordered,p=e.borderless,u=e.hover,m=e.size,g=e.variant,f=e.responsive,v=(0,l.Z)(e,h),x=(0,c.vE)(s,"table"),D=d()(i,x,g&&x+"-"+g,m&&x+"-"+m,o&&x+"-striped",r&&x+"-bordered",p&&x+"-borderless",u&&x+"-hover"),b=a.createElement("table",(0,n.Z)({},v,{className:D,ref:t}));if(f){var j=x+"-responsive";return"string"===typeof f&&(j=j+"-"+f),a.createElement("div",{className:j},b)}return b}));var u=s(91923),m=s(55294),g=s(85797),f=s(27003),v=s(47885),x=s(65410),D=s.n(x),b=s(21830),j=s.n(b),N=s(72426),L=s.n(N),P=(s(29450),s(61229)),y=s(21188),w=s.n(y),I=s(80184);class k extends a.Component{constructor(e){super(e),this.OnLayoutClickEvent=()=>{0===this.state.ExamID?this.OnNotification("No data to print","warning"):this.setState({LayoutViewing:!this.state.LayoutViewing})},this.OnNotification=(e,t)=>{D()({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},this.OnClearForm=()=>{this.setState({LoadPanelVisible:!1}),this.componentDidMount()},this.onLoadPanelHiding=()=>{this.setState({LoadPanelVisible:!1}),D()({message:"Successfully Saved",type:"success",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.ViewSetUp=(e,t,s,a,i)=>{},this.VisibleFalse=()=>{this.setState({LoadingExamSetUp:!1,LoadingID:0,LoadingViewPanel:!1})},this.hideInfo=()=>{this.setState({LoadingExamSetUp:!1})},this.updateMyData=e=>{if(null==this.state.jlBulkUpload||0==this.state.jlBulkUpload.length)return void this.state.jlBulkUpload.push({AutoID:e});let t=[...this.state.jlBulkUpload].find((t=>t.AutoID===e));if(void 0==t||null==t)this.state.jlBulkUpload.push({AutoID:e});else{var s=[...this.state.jlBulkUpload].findIndex((t=>t.AutoID===e));-1!==s&&this.state.jlBulkUpload.splice(s,1)}},this.onBulkApprove=()=>{0!=this.state.jlBulkUpload.length?j().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),this.state.jlBulkUpload.forEach((e=>{this.serverRequest=m.Z.post("/api/approvalTransactionApprove",{ApprovalTransactionID:e.AutoID}).then((e=>{})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))})),this.onLoadPanelHiding(),this.componentDidMount(),this.OnClearForm()):"cancel"==e.dismiss||e.dismiss})):D()({message:"Pleace select document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.onBulkReject=()=>{0!=this.state.jlBulkUpload.length?j().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((e=>{e.value?(this.setState({LoadPanelVisible:!0}),this.state.jlBulkUpload.forEach((e=>{this.serverRequest=m.Z.post("/api/ApprovalTransactionReject",{ApprovalTransactionID:e.AutoID}).then((e=>{})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))})),this.onLoadPanelHiding(),this.componentDidMount(),this.OnClearForm()):"cancel"==e.dismiss||e.dismiss})):D()({message:"Pleace select document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}})},this.state={jlNotification:[],LoadPanelVisible:!1,jlBulkUpload:[],LoadingID:0,LoadingExamSetUp:!1,LoadingExamSetUpID:0,LoadingDocumentID:0,LoadingViewPanel:!1,SchoolID:0,SubjectID:0,PartID:0,LoadingVisiblePlanale:!1,ViewDocumentTypeID:0},this.updateMyData=this.updateMyData.bind(this),this.VisibleFalse=this.VisibleFalse.bind(this)}componentDidMount(){this._isMounted=!0,console.log("reducer data",this.props.data.user.Id),m.Z.all([m.Z.get("/api/approvalTransaction",{params:{UserID:this.props.data.user.Id}})]).then(m.Z.spread((e=>{this._isMounted&&this.setState({jlNotification:JSON.parse(e.data[0].ApprovalTransaction)})}))).catch((e=>console.log(e)))}onClickApprove(e){void 0!=e||null!=e?j().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((t=>{t.value?(this.setState({LoadPanelVisible:!0}),this.serverRequest=m.Z.post("/api/approvalTransactionApprove",{ApprovalTransactionID:e}).then((e=>{console.log("res",e),5005==e.data[0].DocumentType?this.serverRequest=m.Z.post("/api/bulk-credit-note-approval-post-sap",{DocumentPostingData:e.data[0].DocumentPostingData,DocumentNumber:e.data[0].DocumentNumber}).then((e=>{400!=e.status?(this.onLoadPanelHiding(),this.OnClearForm()):(this.setState({LoadPanelVisible:!1}),D()({message:"Document Not Posting to SAP Please Check Document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}}),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)})):5004==e.data[0].DocumentType?this.serverRequest=m.Z.post("/api/bulk-invoice-approval-post-sap",{DocumentPostingData:e.data[0].DocumentPostingData,DocumentNumber:e.data[0].DocumentNumber}).then((e=>{400!=e.status?(this.onLoadPanelHiding(),this.OnClearForm()):(this.setState({LoadPanelVisible:!1}),D()({message:"Document Not Posting to SAP Please Check Document",type:"warning",displayTime:3e3,position:{at:"top right",offset:"50"}}),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)})):(this.onLoadPanelHiding(),this.OnClearForm())})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))):"cancel"==t.dismiss||t.dismiss})):D()({message:"Fields marked with * are required",type:"error",displayTime:3e3,position:{at:"top right",offset:"50"}})}onClickReject(e){void 0!=e||null!=e?j().fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((t=>{t.value?(this.setState({LoadPanelVisible:!0}),this.serverRequest=m.Z.post("/api/ApprovalTransactionReject",{ApprovalTransactionID:e}).then((e=>{this.onLoadPanelHiding(),this.OnClearForm()})).catch((e=>{this.onLoadPanelHiding(),console.log(e)}))):"cancel"==t.dismiss||t.dismiss})):D()({message:"Fields marked with * are required",type:"error",displayTime:3e3,position:{at:"top right",offset:"50"}})}render(){return(0,I.jsxs)(i.Z,{md:12,xl:12,children:[(0,I.jsxs)(o.Z,{className:"Recent-Users",children:[(0,I.jsx)(o.Z.Header,{children:(0,I.jsx)(o.Z.Title,{as:"h5",children:"Approve Document's"})}),(0,I.jsx)(o.Z.Body,{className:"px-0 py-2",children:(0,I.jsx)(p,{responsive:!0,hover:!0,children:(0,I.jsx)("tbody",{children:this.renderTableData()})})})]}),(0,I.jsx)(v.LoadPanel,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),(0,I.jsx)(P.Popup,{visible:this.state.LoadingExamSetUp,onHiding:this.hideInfo,dragEnabled:!1,closeOnOutsideClick:!0,showTitle:!0,title:"Information",children:(0,I.jsx)(w(),{width:"100%",height:"100%"})})]})}renderTableData(){return this.state.jlNotification.map(((e,t)=>(0,I.jsxs)("tr",{className:"unread",children:[(0,I.jsx)("td",{children:(0,I.jsx)("input",{type:"checkbox",onClick:()=>this.updateMyData(e.AutoID)})}),(0,I.jsx)("td",{children:(0,I.jsx)("img",{className:"rounded-circle",style:{width:"40px"},src:f,alt:"activity-user"})}),(0,I.jsxs)("td",{children:[(0,I.jsx)("h6",{className:"mb-1",children:e.Name}),(0,I.jsx)("p",{className:"m-0",children:e.FullName})]}),(0,I.jsx)("td",{children:(0,I.jsxs)("h6",{className:"text-muted",children:[(0,I.jsx)("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),L()(e.CreateDate).format("YYYY-MM-DD")]})}),(0,I.jsx)("td",{children:(0,I.jsx)("div",{children:1==e.IsApproved?(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Approve"}):1==e.IsReject?(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Reject"}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Pending"})})}),(0,I.jsxs)("td",{children:[1==e.IsReject||1==e.IsApproved?(0,I.jsx)("div",{}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",onClick:()=>this.onClickReject(e.AutoID),children:"Reject"}),1==e.IsReject||1==e.IsApproved?(0,I.jsx)("div",{}):(0,I.jsx)("a",{href:u.Z.BLANK_LINK,onClick:()=>this.onClickApprove(e.AutoID),className:"label theme-bg text-white f-12",children:"Approve"}),(0,I.jsx)("a",{href:u.Z.BLANK_LINK,onClick:()=>this.ViewSetUp(e.DocumentNumber,e.DocumentTypeID,e.SchoolID,e.SunjectID,e.PartID),className:"label theme-bg text-white f-12",children:"View"})]})]},e.AutoID)))}}const A=(0,g.$j)((e=>({data:e.loggedReducer})))(k)},2677:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(87462),i=s(63366),o=s(81694),n=s.n(o),l=s(72791),r=s(10162),d=["bsPrefix","className","as"],c=["xl","lg","md","sm","xs"],h=l.forwardRef((function(e,t){var s=e.bsPrefix,o=e.className,h=e.as,p=void 0===h?"div":h,u=(0,i.Z)(e,d),m=(0,r.vE)(s,"col"),g=[],f=[];return c.forEach((function(e){var t,s,a,i=u[e];if(delete u[e],"object"===typeof i&&null!=i){var o=i.span;t=void 0===o||o,s=i.offset,a=i.order}else t=i;var n="xs"!==e?"-"+e:"";t&&g.push(!0===t?""+m+n:""+m+n+"-"+t),null!=a&&f.push("order"+n+"-"+a),null!=s&&f.push("offset"+n+"-"+s)})),g.length||g.push(m),l.createElement(p,(0,a.Z)({},u,{ref:t,className:n().apply(void 0,[o].concat(g,f))}))}));h.displayName="Col";const p=h}}]);
//# sourceMappingURL=219.ae3cc6d1.chunk.js.map